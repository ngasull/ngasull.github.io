<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Pourquoi Docker ? | Nico&#x27;s Lab</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/67269c7d1e9da300.css" as="style"/><link rel="stylesheet" href="/_next/static/css/67269c7d1e9da300.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-3b5a00d5d7e8d93b.js" defer=""></script><script src="/_next/static/chunks/main-11be7a5831576890.js" defer=""></script><script src="/_next/static/chunks/pages/_app-3b641619ed056464.js" defer=""></script><script src="/_next/static/chunks/814-f83b2571d190bfbd.js" defer=""></script><script src="/_next/static/chunks/pages/fr/blog/%5Bslug%5D-df4c78413f25b145.js" defer=""></script><script src="/_next/static/XfiD0591POrqhAMreRIZE/_buildManifest.js" defer=""></script><script src="/_next/static/XfiD0591POrqhAMreRIZE/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="ng-header"><h1>Le labo de Nico</h1><h3 class="py-2 md:p-0">ğŸ”­ ğŸ¶ ğŸ•º</h3><nav><a href="/fr">Blog</a> / <a href="/fr/about">Ã€ propos</a> / <a href="/fr/rss.xml">RSS</a> / <a href="/">ğŸ‡¬ğŸ‡§</a></nav></header><main aria-label="Content"><h1>Pourquoi Docker ?</h1><h6 class="pb-8">6 aoÃ»t 2020</h6><div><section class="doc-section level-1"><h2 id="_pour_travailler_ensemble">Pour travailler ensemble</h2><p>Tout le monde dÃ©veloppe sur diffÃ©rentes machines. Il nâ€™est pas rare que plusieurs collÃ¨gues aient installÃ© diffÃ©rentes version dâ€™une mÃªme library, dâ€™un package manager, du runtime de leur applicationâ€¦â€‹ (cc node/npm ğŸ‘‹)</p>
<p>Lorsque lâ€™application de dÃ©veloppement est dockerisÃ©e, tous les devs (et la prod !) sont soumis aux mÃªmes rÃ¨gles, ce qui Ã©vite le syndrÃ´me de <em>"mais Ã§a marche sur mon PC"</em> tout en rÃ©duisant la configuration nÃ©cessaire Ã  installer lâ€™environnement de dev. Voir juste aprÃ¨s !</p></section>
<section class="doc-section level-1"><h2 id="_pour_moins_perdre_de_temps_Ã _configurer">Pour moins perdre de temps Ã  configurer</h2><p>La configuration, câ€™est du temps passÃ© Ã  ne pas Ãªtre productif. Plus il y a dâ€™environnements dans lesquels une application doit tourner, plus il y a de configuration Ã  faire. Docker permet dâ€™abstraire lâ€™environnement dans lequel tourne lâ€™application et donc de ne faire que le minimum nÃ©cessaire.</p>
<p>Une consÃ©quence notable : pour ajouter un service Ã  la stack, plus forcÃ©ment besoin dâ€™apprendre en dÃ©tails une technologie. Il suffit dâ€™ajouter une image existante de celle-ci, et de simplement spÃ©cifier les variables dâ€™environnement nÃ©cessaires. Par exemple, pour <a href="https://hub.docker.com/_/postgres/">ajouter une database PostgreSQL</a>, il suffit au minimum de renseigner un root password et de monter un volume pour persister les donnÃ©es.</p></section>
<section class="doc-section level-1"><h2 id="_pour_sÃ©parer_les_problÃ¨mes">Pour sÃ©parer les problÃ¨mes</h2><p>Comme chaque service est aussi simple que possible, chacun nâ€™a que trÃ¨s peu de dÃ©pendances avec le reste du monde. On voit que, par nature, les conteneurs nous poussent Ã  nâ€™avoir que le minimum vital de dÃ©pendances entre services.</p>
<p>Par dÃ©pendances, je pense en particulier Ã  :</p>
<div class="ulist"><ul><li>SystÃ¨me, programmes, libraries installÃ©es</li><li>Configurations associÃ©es Ã  ce setup</li><li>Volumes (fichiers)</li><li>AccÃ¨s rÃ©seau</li></ul></div></section>
<section class="doc-section level-1"><h2 id="_pour_gÃ©rer_et_sÃ©curiser_les_connexions_rÃ©seau">Pour gÃ©rer et sÃ©curiser les connexions rÃ©seau</h2><p>Car oui : câ€™est vite fait de faire fuiter le port dâ€™une database, et <a href="https://www.bleepingcomputer.com/news/security/new-meow-attack-has-deleted-almost-4-000-unsecured-databases/">quand elle nâ€™est pas sÃ©curisÃ©e câ€™est gÃªnant</a> ğŸ˜¬</p>
<p>Lâ€™idÃ©e est de penser un service comme une boÃ®te noire qui expose un ou plusieurs ports. Les services communiquent entre eux grÃ¢ce aux volumes montÃ©s en commun ou Ã  travers des ports internes. En effet, les <a href="https://docs.docker.com/compose/networking/">services appartenant Ã  un mÃªme rÃ©seau</a> peuvent par dÃ©faut sâ€™accÃ©der entre eux.</p></section>
<section class="doc-section level-1"><h2 id="_piÃ¨ges_et_trucs_Ã _savoir">PiÃ¨ges et trucs Ã  savoir</h2><p>Sous Windows et Mac, les conteneurs tournent sur une VM. Du coup câ€™est lent, pas natif et les lectures/Ã©critures disque peuvent ralentir lâ€™Ã©dition de fichiers. La solution est simple : utilise Linux ğŸ˜ (ou un Windows/Mac puissant)</p>
<p>Lorsquâ€™un mÃªme volume (dossier) est montÃ© en Ã©criture dans deux conteneurs Ã  la fois, on peut se retrouver avec des comportements inattendus : chez moi, lâ€™intÃ©gralitÃ© du dossier gÃ©nÃ©rÃ© par un run de build disparaissait en mÃªme temps que le conteneur Ã  la fin du run. Je recommande donc vivement de ne monter en Ã©criture quâ€™un seul fichier ou dossier Ã  la fois.</p>
<p>Câ€™est possible de ne partager en Ã©criture quâ€™une partie dâ€™une mÃªme arborescence commune. Par exemple, si <code>backend</code> et <code>frontend</code> partagent <code>code</code> en lecture mais que <code>backend</code> doit Ã©crire dans <code>code/target</code> et <code>frontend</code> doit Ã©crire dans <code>code/dist</code>, alors les volumes peuvent Ãªtre surchargÃ©s comme ceci :</p>
<div class="listing-block"><pre class="highlightjs highlight"><code class="language-yml hljs language-yaml" data-lang="yml"><span class="hljs-attr">backend:</span>
  <span class="hljs-attr">volumes:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">./code:/code:ro</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">./code/target:/code/target</span>

<span class="hljs-attr">webapp:</span>
  <span class="hljs-attr">volumes:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">./code:/code:ro</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">./code/dist:/code/dist</span></code></pre></div>
<p>Les images Docker peuvent vite prendre de lâ€™espace disque. Mais avec le temps, la communautÃ© opte de plus en plus pour des versions minimalistes de chaque image. Autrefois avec une version <em>slim</em> de Debian, et aujourdâ€™hui souvent avec une version <a href="https://alpinelinux.org/about/">Alpine Linux</a> qui permet aux images de faire moins de 10Mo de base ! PrÃ©fÃ¨re-donc utiliser les tags <code>-alpine</code> de chaque image.</p>
<p>Enfin, la gestion des permissions est dÃ©routante au dÃ©but. Docker tourne en root par dÃ©faut et a de bonnes raisons de le faire : autant dire que jâ€™apprÃ©cie de pouvoir ouvrir les ports 80 ou 443 en dev comme en prod ğŸ™‚</p>
<p>Pour mieux comprendre pourquoi et comment bien gÃ©rer ses permissions : <a href="/fr/blog/gerer-ses-permissions-avec-docker">voir cet article</a>.</p></section>
<section class="doc-section level-1"><h2 id="_par_oÃ¹_commencer">Par oÃ¹ commencer?</h2><p>En prenant le temps de lire la doc dans lâ€™ordre, tout ne peut que bien se passer :</p>
<div class="olist arabic"><ol class="arabic"><li><a href="https://docs.docker.com/get-started/overview/">Comprends Docker</a></li><li><a href="https://docs.docker.com/compose/">Comprends docker compose</a> pour simplement faire cohabiter les services entre eux</li><li>Installe <a href="https://docs.docker.com/engine/install/">docker</a> et <a href="https://docs.docker.com/compose/install/">son plugin compose</a></li><li><a href="https://docs.docker.com/engine/install/linux-postinstall/#manage-docker-as-a-non-root-user">Ajoute ton user au groupe <code>docker</code></a> pour piloter le daemon sans <code>sudo</code></li><li>Câ€™est parti ! Nâ€™oublie pas de garder la configuration la plus simple possible.</li></ol></div>
<details><summary>Exemple</summary><div class="content"><p>Une stack complÃ¨te React/Rust/PostgreSQL pourrait Ãªtre lancÃ©e avec la simple config suivante Ã  la racine dâ€™un projet :</p>
<div class="listing-block"><pre class="highlightjs highlight"><code class="language-yml hljs language-yaml" data-lang="yml"><span class="hljs-attr">version:</span> <span class="hljs-string">"3"</span>
<span class="hljs-attr">services:</span>
  <span class="hljs-attr">db:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">postgres:alpine</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_PASSWORD=yolo</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./db/data:/var/lib/postgresql/data</span>
  <span class="hljs-attr">backend:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">rust:slim</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">PGHOST=db</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">PGDATABASE=monservice</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">PGUSER=root</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">PGPASSWORD=yolo</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./backend/:/home/backend</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./webapp/:/home/webapp:ro</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">cargo</span> <span class="hljs-string">run</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-number">4000</span><span class="hljs-string">:4000</span>
  <span class="hljs-attr">webapp:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">node:alpine</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">BACKEND_URL=http://backend:4000/</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./webapp/:/home/webapp</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">sh</span> <span class="hljs-string">-c</span> <span class="hljs-string">"yarn install &amp;&amp; CI=true yarn start"</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-number">80</span><span class="hljs-string">:8080</span></code></pre></div>
<p><code>docker compose up -d</code> et câ€™est parti directement sur <a href="http://localhost">localhost</a> ! ğŸ’»</p></div></details></section></div></main><footer class="mt-8 text-center"><p><a href="/fr">Retour aux articles  ğŸ‘€</a></p><p>Copyright Â© 2019<!-- -->-2022<!-- --> <a href="/fr/about">NicolasÂ Gasull</a></p><address class="space-x-5"><a href="https://www.twitter.com/ngasull"><svg class="w-4 h-4 p-2 -m-2 align-text-top fill-current"><use xlink:href="/svg/icons.svg#twitter"></use></svg></a><a href="https://www.github.com/ngasull"><svg class="w-4 h-4 p-2 -m-2 align-text-top fill-current"><use xlink:href="/svg/icons.svg#github"></use></svg></a><a href="https://stackoverflow.com/users/2219133/ngasull"><svg class="w-4 h-4 p-2 -m-2 align-text-top fill-current"><use xlink:href="/svg/icons.svg#stackoverflow"></use></svg></a><a href="https://www.linkedin.com/in/nicolasgasull"><svg class="w-4 h-4 p-2 -m-2 align-text-top fill-current"><use xlink:href="/svg/icons.svg#linkedin"></use></svg></a><a href="/fr/about"><svg class="w-4 h-4 p-2 -m-2 align-text-top fill-current"><use xlink:href="/svg/icons.svg#at"></use></svg></a><a href="/fr/rss.xml"><svg class="w-4 h-4 p-2 -m-2 align-text-top fill-current"><use xlink:href="/svg/icons.svg#rss"></use></svg></a></address></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"locale":"fr","scope":{"date":"2020-08-06","slug":"pourquoi-docker","lang":"fr","title":"Pourquoi Docker ?","html":"\u003csection class=\"doc-section level-1\"\u003e\u003ch2 id=\"_pour_travailler_ensemble\"\u003ePour travailler ensemble\u003c/h2\u003e\u003cp\u003eTout le monde dÃ©veloppe sur diffÃ©rentes machines. Il nâ€™est pas rare que plusieurs collÃ¨gues aient installÃ© diffÃ©rentes version dâ€™une mÃªme library, dâ€™un package manager, du runtime de leur applicationâ€¦â€‹ (cc node/npm ğŸ‘‹)\u003c/p\u003e\n\u003cp\u003eLorsque lâ€™application de dÃ©veloppement est dockerisÃ©e, tous les devs (et la prod !) sont soumis aux mÃªmes rÃ¨gles, ce qui Ã©vite le syndrÃ´me de \u003cem\u003e\"mais Ã§a marche sur mon PC\"\u003c/em\u003e tout en rÃ©duisant la configuration nÃ©cessaire Ã  installer lâ€™environnement de dev. Voir juste aprÃ¨s !\u003c/p\u003e\u003c/section\u003e\n\u003csection class=\"doc-section level-1\"\u003e\u003ch2 id=\"_pour_moins_perdre_de_temps_Ã _configurer\"\u003ePour moins perdre de temps Ã  configurer\u003c/h2\u003e\u003cp\u003eLa configuration, câ€™est du temps passÃ© Ã  ne pas Ãªtre productif. Plus il y a dâ€™environnements dans lesquels une application doit tourner, plus il y a de configuration Ã  faire. Docker permet dâ€™abstraire lâ€™environnement dans lequel tourne lâ€™application et donc de ne faire que le minimum nÃ©cessaire.\u003c/p\u003e\n\u003cp\u003eUne consÃ©quence notable : pour ajouter un service Ã  la stack, plus forcÃ©ment besoin dâ€™apprendre en dÃ©tails une technologie. Il suffit dâ€™ajouter une image existante de celle-ci, et de simplement spÃ©cifier les variables dâ€™environnement nÃ©cessaires. Par exemple, pour \u003ca href=\"https://hub.docker.com/_/postgres/\"\u003eajouter une database PostgreSQL\u003c/a\u003e, il suffit au minimum de renseigner un root password et de monter un volume pour persister les donnÃ©es.\u003c/p\u003e\u003c/section\u003e\n\u003csection class=\"doc-section level-1\"\u003e\u003ch2 id=\"_pour_sÃ©parer_les_problÃ¨mes\"\u003ePour sÃ©parer les problÃ¨mes\u003c/h2\u003e\u003cp\u003eComme chaque service est aussi simple que possible, chacun nâ€™a que trÃ¨s peu de dÃ©pendances avec le reste du monde. On voit que, par nature, les conteneurs nous poussent Ã  nâ€™avoir que le minimum vital de dÃ©pendances entre services.\u003c/p\u003e\n\u003cp\u003ePar dÃ©pendances, je pense en particulier Ã  :\u003c/p\u003e\n\u003cdiv class=\"ulist\"\u003e\u003cul\u003e\u003cli\u003eSystÃ¨me, programmes, libraries installÃ©es\u003c/li\u003e\u003cli\u003eConfigurations associÃ©es Ã  ce setup\u003c/li\u003e\u003cli\u003eVolumes (fichiers)\u003c/li\u003e\u003cli\u003eAccÃ¨s rÃ©seau\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/section\u003e\n\u003csection class=\"doc-section level-1\"\u003e\u003ch2 id=\"_pour_gÃ©rer_et_sÃ©curiser_les_connexions_rÃ©seau\"\u003ePour gÃ©rer et sÃ©curiser les connexions rÃ©seau\u003c/h2\u003e\u003cp\u003eCar oui : câ€™est vite fait de faire fuiter le port dâ€™une database, et \u003ca href=\"https://www.bleepingcomputer.com/news/security/new-meow-attack-has-deleted-almost-4-000-unsecured-databases/\"\u003equand elle nâ€™est pas sÃ©curisÃ©e câ€™est gÃªnant\u003c/a\u003e ğŸ˜¬\u003c/p\u003e\n\u003cp\u003eLâ€™idÃ©e est de penser un service comme une boÃ®te noire qui expose un ou plusieurs ports. Les services communiquent entre eux grÃ¢ce aux volumes montÃ©s en commun ou Ã  travers des ports internes. En effet, les \u003ca href=\"https://docs.docker.com/compose/networking/\"\u003eservices appartenant Ã  un mÃªme rÃ©seau\u003c/a\u003e peuvent par dÃ©faut sâ€™accÃ©der entre eux.\u003c/p\u003e\u003c/section\u003e\n\u003csection class=\"doc-section level-1\"\u003e\u003ch2 id=\"_piÃ¨ges_et_trucs_Ã _savoir\"\u003ePiÃ¨ges et trucs Ã  savoir\u003c/h2\u003e\u003cp\u003eSous Windows et Mac, les conteneurs tournent sur une VM. Du coup câ€™est lent, pas natif et les lectures/Ã©critures disque peuvent ralentir lâ€™Ã©dition de fichiers. La solution est simple : utilise Linux ğŸ˜ (ou un Windows/Mac puissant)\u003c/p\u003e\n\u003cp\u003eLorsquâ€™un mÃªme volume (dossier) est montÃ© en Ã©criture dans deux conteneurs Ã  la fois, on peut se retrouver avec des comportements inattendus : chez moi, lâ€™intÃ©gralitÃ© du dossier gÃ©nÃ©rÃ© par un run de build disparaissait en mÃªme temps que le conteneur Ã  la fin du run. Je recommande donc vivement de ne monter en Ã©criture quâ€™un seul fichier ou dossier Ã  la fois.\u003c/p\u003e\n\u003cp\u003eCâ€™est possible de ne partager en Ã©criture quâ€™une partie dâ€™une mÃªme arborescence commune. Par exemple, si \u003ccode\u003ebackend\u003c/code\u003e et \u003ccode\u003efrontend\u003c/code\u003e partagent \u003ccode\u003ecode\u003c/code\u003e en lecture mais que \u003ccode\u003ebackend\u003c/code\u003e doit Ã©crire dans \u003ccode\u003ecode/target\u003c/code\u003e et \u003ccode\u003efrontend\u003c/code\u003e doit Ã©crire dans \u003ccode\u003ecode/dist\u003c/code\u003e, alors les volumes peuvent Ãªtre surchargÃ©s comme ceci :\u003c/p\u003e\n\u003cdiv class=\"listing-block\"\u003e\u003cpre class=\"highlightjs highlight\"\u003e\u003ccode class=\"language-yml hljs language-yaml\" data-lang=\"yml\"\u003e\u003cspan class=\"hljs-attr\"\u003ebackend:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003evolumes:\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e./code:/code:ro\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e./code/target:/code/target\u003c/span\u003e\n\n\u003cspan class=\"hljs-attr\"\u003ewebapp:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003evolumes:\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e./code:/code:ro\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e./code/dist:/code/dist\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eLes images Docker peuvent vite prendre de lâ€™espace disque. Mais avec le temps, la communautÃ© opte de plus en plus pour des versions minimalistes de chaque image. Autrefois avec une version \u003cem\u003eslim\u003c/em\u003e de Debian, et aujourdâ€™hui souvent avec une version \u003ca href=\"https://alpinelinux.org/about/\"\u003eAlpine Linux\u003c/a\u003e qui permet aux images de faire moins de 10Mo de base ! PrÃ©fÃ¨re-donc utiliser les tags \u003ccode\u003e-alpine\u003c/code\u003e de chaque image.\u003c/p\u003e\n\u003cp\u003eEnfin, la gestion des permissions est dÃ©routante au dÃ©but. Docker tourne en root par dÃ©faut et a de bonnes raisons de le faire : autant dire que jâ€™apprÃ©cie de pouvoir ouvrir les ports 80 ou 443 en dev comme en prod ğŸ™‚\u003c/p\u003e\n\u003cp\u003ePour mieux comprendre pourquoi et comment bien gÃ©rer ses permissions : \u003ca href=\"/fr/blog/gerer-ses-permissions-avec-docker\"\u003evoir cet article\u003c/a\u003e.\u003c/p\u003e\u003c/section\u003e\n\u003csection class=\"doc-section level-1\"\u003e\u003ch2 id=\"_par_oÃ¹_commencer\"\u003ePar oÃ¹ commencer?\u003c/h2\u003e\u003cp\u003eEn prenant le temps de lire la doc dans lâ€™ordre, tout ne peut que bien se passer :\u003c/p\u003e\n\u003cdiv class=\"olist arabic\"\u003e\u003col class=\"arabic\"\u003e\u003cli\u003e\u003ca href=\"https://docs.docker.com/get-started/overview/\"\u003eComprends Docker\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://docs.docker.com/compose/\"\u003eComprends docker compose\u003c/a\u003e pour simplement faire cohabiter les services entre eux\u003c/li\u003e\u003cli\u003eInstalle \u003ca href=\"https://docs.docker.com/engine/install/\"\u003edocker\u003c/a\u003e et \u003ca href=\"https://docs.docker.com/compose/install/\"\u003eson plugin compose\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://docs.docker.com/engine/install/linux-postinstall/#manage-docker-as-a-non-root-user\"\u003eAjoute ton user au groupe \u003ccode\u003edocker\u003c/code\u003e\u003c/a\u003e pour piloter le daemon sans \u003ccode\u003esudo\u003c/code\u003e\u003c/li\u003e\u003cli\u003eCâ€™est parti ! Nâ€™oublie pas de garder la configuration la plus simple possible.\u003c/li\u003e\u003c/ol\u003e\u003c/div\u003e\n\u003cdetails\u003e\u003csummary\u003eExemple\u003c/summary\u003e\u003cdiv class=\"content\"\u003e\u003cp\u003eUne stack complÃ¨te React/Rust/PostgreSQL pourrait Ãªtre lancÃ©e avec la simple config suivante Ã  la racine dâ€™un projet :\u003c/p\u003e\n\u003cdiv class=\"listing-block\"\u003e\u003cpre class=\"highlightjs highlight\"\u003e\u003ccode class=\"language-yml hljs language-yaml\" data-lang=\"yml\"\u003e\u003cspan class=\"hljs-attr\"\u003eversion:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"3\"\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eservices:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003edb:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eimage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003epostgres:alpine\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eenvironment:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePOSTGRES_PASSWORD=yolo\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003evolumes:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e./db/data:/var/lib/postgresql/data\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ebackend:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eimage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003erust:slim\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eenvironment:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePGHOST=db\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePGDATABASE=monservice\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePGUSER=root\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePGPASSWORD=yolo\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003evolumes:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e./backend/:/home/backend\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e./webapp/:/home/webapp:ro\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003ecommand:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ecargo\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003erun\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eports:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e4000\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e:4000\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ewebapp:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eimage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003enode:alpine\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eenvironment:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eBACKEND_URL=http://backend:4000/\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003evolumes:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e./webapp/:/home/webapp\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003ecommand:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003esh\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e-c\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"yarn install \u0026amp;\u0026amp; CI=true yarn start\"\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eports:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e:8080\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003ccode\u003edocker compose up -d\u003c/code\u003e et câ€™est parti directement sur \u003ca href=\"http://localhost\"\u003elocalhost\u003c/a\u003e ! ğŸ’»\u003c/p\u003e\u003c/div\u003e\u003c/details\u003e\u003c/section\u003e","categories":["devops"]}},"__N_SSG":true},"page":"/fr/blog/[slug]","query":{"slug":"pourquoi-docker"},"buildId":"XfiD0591POrqhAMreRIZE","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>